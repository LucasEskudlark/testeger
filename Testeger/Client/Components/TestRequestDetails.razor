@inject TooltipService TooltipService
@inject DialogService DialogService
@inject TestRequestService TestRequestService

<RadzenContent>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <RadzenLabel Text="Title" Style="@LabelStyle" />
                <RadzenTextBox @bind-Value="Request.Title" Style="width:100%;" />
            </div>
            <div class="col-md-4">
                <RadzenLabel Text="Assigned to" Style="@LabelStyle" />
                <RadzenDropDown Data="names"
                                @bind-Value="Request.AssignedTo.Name" Style="width:100%;" />
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-12">
                <RadzenLabel Text="Description" Style="@LabelStyle" />
                <RadzenTextArea @bind-Value="Request.Description" Style="width:100%; height:100px; resize: none;" />
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-4">
                <RadzenLabel Text="Status" Style="@LabelStyle"  />
                <RadzenDropDown Data="@Enum.GetValues(typeof(RequestStatus))"
                                @bind-Value="Request.Status" Style="width:100%;" />
            </div>
            <div class="col-md-4">
                <RadzenLabel Text="Priority Level" Style="@LabelStyle" />
                <RadzenDropDown Data="@Enum.GetValues(typeof(PriorityLevel))"
                                @bind-Value="Request.PriorityLevel" Style="width:100%;" />
            </div>
            <div class="col-md-4">
                <RadzenLabel Text="Created by" Style="@LabelStyle"  />
                <RadzenTextBox Disabled="true" @bind-Value="Request.CreatorId" Style="width:100%;" />
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-4">
                <RadzenLabel Text="Due Date" Style="@LabelStyle"  />
                <RadzenDatePicker @bind-Value="Request.DueDate"
                                  Style="width:100%;" Min="@(DateTime.Today)"
                                  DateFormat="dd/MM/yyyy" />
            </div>
            <div class="col-md-4">
                <RadzenLabel Text="Created Date" Style="@LabelStyle" />
                <RadzenDatePicker Disabled="true"
                                  @bind-Value="Request.CreatedDate"
                                  Style="width:100%;" Min="@(DateTime.Today)"
                                  DateFormat="dd/MM/yyyy" />
            </div>
            <div class="col-md-4">
                <RadzenLabel Text="Completed Date" Style="@LabelStyle" />
                <RadzenDatePicker Disabled="true"
                                  @bind-Value="Request.CompletedDate"
                                  Style="width:100%;" Min="@(DateTime.Today)"
                                  DateFormat="dd/MM/yyyy" MouseEnter="@(args => ShowTooltip(args) )" />
            </div>
        </div>
        
    </div>
</RadzenContent>

@code {
    [Parameter]
    public TestRequest Request { get; set; }

    private string LabelStyle = "font-weight: 600 !important; color: #333 !important;";

    // Temporary
    private List<string> names = new()
    {
        "Lucas",
        "Fernando"
    };

    private void ShowTooltip(ElementReference elementReference, TooltipOptions options = null) => TooltipService.Open(elementReference, "This date will be set when the request is marked as Completed.", options);
}
