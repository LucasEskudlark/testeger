@page "/"
@layout DefaultLayout
@inject TestRequestService TestRequestService

<PageTitle>Index</PageTitle>

@foreach (var status in testRequestsByStatus.Keys)
{
    var requests = testRequestsByStatus[status];
    @foreach (var request in requests)
    {
        <RadzenDataList AllowVirtualization="false" AllowPaging="true"
                        Data="@requests" TItem="TestRequest" PageSize="5" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">
            <Template Context="request">
                <RadzenCard Style="width: 100%; padding: 0;">
                    <RadzenRow Gap="0">
                        <RadzenColumn Size="12" SizeLG="3" Class="rz-p-4 product-title">
                            <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" class="rz-color-secondary">@(request.Title)</RadzenText>
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeLG="7" Class="rz-p-4">
                            <RadzenRow Gap="5">
                                <RadzenColumn Size="12" SizeMD="6" SizeLG="2">
                                    <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Number</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Body2">@(request.Number)</RadzenText>
                                </RadzenColumn>
                                <RadzenColumn Size="12" SizeMD="6" SizeLG="2">
                                    <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Priority</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Body2">@(request.PriorityLevel)</RadzenText>
                                </RadzenColumn>
                                <RadzenColumn Size="12" SizeMD="6" SizeLG="2">
                                    <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Status</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Body2">@(request.Status)</RadzenText>
                                </RadzenColumn>
                                <RadzenColumn Size="12" SizeMD="6" SizeLG="3">
                                    <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Assigned To</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Body2">@(request.CreatorId)</RadzenText>
                                </RadzenColumn>
                                <RadzenColumn Size="12" SizeMD="6" SizeLG="3">
                                    <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Due Date</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Body2">@(request.DueDate.ToString("dd/MM/YYYY"))</RadzenText>
                                </RadzenColumn>
                            </RadzenRow>
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeLG="2" Class="rz-p-4">
                            <RadzenButton Text="View more" Style="width: 100%" />
                        </RadzenColumn>
                    </RadzenRow>
                </RadzenCard>
            </Template>
        </RadzenDataList>
    }
}


<style>
    .product-title {
        min-height: 72px;
        background-color: var(--rz-secondary-lighter);
    }

    .price-badge {
        font-size: 16px;
        font-weight: bold;
        line-height: 20px;
        padding: 8px;
    }
</style>

@code {
    private Dictionary<RequestStatus, List<TestRequest>> testRequestsByStatus = new();


    protected override async Task OnInitializedAsync()
    {
        testRequestsByStatus = await TestRequestService.GetTestRequestsByProjectIdGroupedByStatus("863c4c7e-cbe5-446f-9757-7ca2990382aa");
    }
}